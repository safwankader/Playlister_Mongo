{"ast":null,"code":"/**\r\n * jsTPS_Transaction\r\n * \r\n * This provides the basic structure for a transaction class. Note to use\r\n * jsTPS one should create objects that define these two methods, doTransaction\r\n * and undoTransaction, which will update the application state accordingly.\r\n * \r\n * @author THE McKilla Gorilla (accept no imposters)\r\n * @version 1.0\r\n */\nexport class jsTPS_Transaction {\n  /**\r\n   * This method is called by jTPS when a transaction is executed.\r\n   */\n  doTransaction() {\n    console.log(\"doTransaction - MISSING IMPLEMENTATION\");\n  }\n\n  /**\r\n   * This method is called by jTPS when a transaction is undone.\r\n   */\n  undoTransaction() {\n    console.log(\"undoTransaction - MISSING IMPLEMENTATION\");\n  }\n}\n\n/**\r\n * jsTPS\r\n * \r\n * This class serves as the Transaction Processing System. Note that it manages\r\n * a stack of jsTPS_Transaction objects, each of which know how to do or undo\r\n * state changes for the given application. Note that this TPS is not platform\r\n * specific as it is programmed in raw JavaScript.\r\n */\nexport default class jsTPS {\n  constructor() {\n    // THE TRANSACTION STACK\n    this.transactions = [];\n\n    // THE TOTAL NUMBER OF TRANSACTIONS ON THE STACK,\n    // INCLUDING THOSE THAT MAY HAVE ALREADY BEEN UNDONE\n    this.numTransactions = 0;\n\n    // THE INDEX OF THE MOST RECENT TRANSACTION, NOTE THAT\n    // THIS MAY BE IN THE MIDDLE OF THE TRANSACTION STACK\n    // IF SOME TRANSACTIONS ON THE STACK HAVE BEEN UNDONE\n    // AND STILL COULD BE REDONE.\n    this.mostRecentTransaction = -1;\n\n    // THESE STATE VARIABLES ARE TURNED ON AND OFF WHILE\n    // TRANSACTIONS ARE DOING THEIR WORK SO AS TO HELP\n    // MANAGE CONCURRENT UPDATES\n    this.performingDo = false;\n    this.performingUndo = false;\n  }\n\n  /**\r\n   * isPerformingDo\r\n   * \r\n   * Accessor method for getting a boolean representing whether or not\r\n   * a transaction is currently in the midst of a do/redo operation.\r\n   */\n  isPerformingDo() {\n    return this.performingDo;\n  }\n\n  /**\r\n   * isPerformingUndo\r\n   * \r\n   * Accessor method for getting a boolean representing whether or not\r\n   * a transaction is currently in the midst of an undo operation.\r\n   */\n  isPerformingUndo() {\n    return this.performingUndo;\n  }\n\n  /**\r\n   * getSize\r\n   * \r\n   * Accessor method for getting the number of transactions on the stack.\r\n   */\n  getSize() {\n    return this.transactions.length;\n  }\n\n  /**\r\n   * getRedoSize\r\n   * \r\n   * Method for getting the total number of transactions on the stack\r\n   * that can possibly be redone.\r\n   */\n  getRedoSize() {\n    return this.getSize() - this.mostRecentTransaction - 1;\n  }\n\n  /**\r\n   * getUndoSize\r\n   * \r\n   * Method for getting the total number of transactions on the stack\r\n   * that can possible be undone.\r\n   */\n  getUndoSize() {\n    return this.mostRecentTransaction + 1;\n  }\n\n  /**\r\n   * hasTransactionToRedo\r\n   * \r\n   * Method for getting a boolean representing whether or not\r\n   * there are transactions on the stack that can be redone.\r\n   */\n  hasTransactionToRedo() {\n    return this.mostRecentTransaction + 1 < this.numTransactions;\n  }\n\n  /**\r\n   * hasTransactionToUndo\r\n   * \r\n   * Method for getting a boolean representing whehter or not\r\n   * there are transactions on the stack that can be undone.\r\n   */\n  hasTransactionToUndo() {\n    return this.mostRecentTransaction >= 0;\n  }\n\n  /**\r\n   * addTransaction\r\n   * \r\n   * Method for adding a transaction to the TPS stack, note it\r\n   * also then does the transaction.\r\n   * \r\n   * @param {jsTPS_Transaction} transaction Transaction to add to the stack and do.\r\n   */\n  addTransaction(transaction) {\n    // ARE WE BRANCHING?\n    if (this.mostRecentTransaction < 0 || this.mostRecentTransaction < this.transactions.length - 1) {\n      for (let i = this.transactions.length - 1; i > this.mostRecentTransaction; i--) {\n        this.transactions.splice(i, 1);\n      }\n      this.numTransactions = this.mostRecentTransaction + 2;\n    } else {\n      this.numTransactions++;\n    }\n\n    // ADD THE TRANSACTION\n    this.transactions[this.mostRecentTransaction + 1] = transaction;\n\n    // AND EXECUTE IT\n    this.doTransaction();\n  }\n\n  /**\r\n   * doTransaction\r\n   * \r\n   * Does the current transaction on the stack and advances the transaction\r\n   * counter. Note this function may be invoked as a result of either adding\r\n   * a transaction (which also does it), or redoing a transaction.\r\n   */\n  doTransaction() {\n    if (this.hasTransactionToRedo()) {\n      this.performingDo = true;\n      let transaction = this.transactions[this.mostRecentTransaction + 1];\n      transaction.doTransaction();\n      this.mostRecentTransaction++;\n      this.performingDo = false;\n    }\n  }\n\n  /**\r\n   * This function gets the most recently executed transaction on the \r\n   * TPS stack and undoes it, moving the TPS counter accordingly.\r\n   */\n  undoTransaction() {\n    if (this.hasTransactionToUndo()) {\n      this.performingUndo = true;\n      let transaction = this.transactions[this.mostRecentTransaction];\n      transaction.undoTransaction();\n      this.mostRecentTransaction--;\n      this.performingUndo = false;\n    }\n  }\n\n  /**\r\n   * clearAllTransactions\r\n   * \r\n   * Removes all the transactions from the TPS, leaving it with none.\r\n   */\n  clearAllTransactions() {\n    // REMOVE ALL THE TRANSACTIONS\n    this.transactions = [];\n\n    // MAKE SURE TO RESET THE LOCATION OF THE\n    // TOP OF THE TPS STACK TOO\n    this.mostRecentTransaction = -1;\n    this.numTransactions = 0;\n  }\n\n  /**\r\n   * toString\r\n   * \r\n   * Builds and returns a textual represention of the full TPS and its stack.\r\n   */\n  toString() {\n    let text = \"--Number of Transactions: \" + this.numTransactions + \"\\n\";\n    text += \"--Current Index on Stack: \" + this.mostRecentTransaction + \"\\n\";\n    text += \"--Current Transaction Stack:\\n\";\n    for (let i = 0; i <= this.mostRecentTransaction; i++) {\n      let jT = this.transactions[i];\n      text += \"----\" + jT.toString() + \"\\n\";\n    }\n    return text;\n  }\n}","map":{"version":3,"names":["jsTPS_Transaction","doTransaction","console","log","undoTransaction","jsTPS","constructor","transactions","numTransactions","mostRecentTransaction","performingDo","performingUndo","isPerformingDo","isPerformingUndo","getSize","length","getRedoSize","getUndoSize","hasTransactionToRedo","hasTransactionToUndo","addTransaction","transaction","i","splice","clearAllTransactions","toString","text","jT"],"sources":["C:/Users/skade/Playlister_HW3/client/src/common/jsTPS.js"],"sourcesContent":["/**\r\n * jsTPS_Transaction\r\n * \r\n * This provides the basic structure for a transaction class. Note to use\r\n * jsTPS one should create objects that define these two methods, doTransaction\r\n * and undoTransaction, which will update the application state accordingly.\r\n * \r\n * @author THE McKilla Gorilla (accept no imposters)\r\n * @version 1.0\r\n */\r\nexport class jsTPS_Transaction {\r\n    /**\r\n     * This method is called by jTPS when a transaction is executed.\r\n     */\r\n    doTransaction() {\r\n        console.log(\"doTransaction - MISSING IMPLEMENTATION\");\r\n    }\r\n    \r\n    /**\r\n     * This method is called by jTPS when a transaction is undone.\r\n     */\r\n    undoTransaction() {\r\n        console.log(\"undoTransaction - MISSING IMPLEMENTATION\");\r\n    }\r\n}\r\n\r\n/**\r\n * jsTPS\r\n * \r\n * This class serves as the Transaction Processing System. Note that it manages\r\n * a stack of jsTPS_Transaction objects, each of which know how to do or undo\r\n * state changes for the given application. Note that this TPS is not platform\r\n * specific as it is programmed in raw JavaScript.\r\n */\r\nexport default class jsTPS {\r\n    constructor() {\r\n        // THE TRANSACTION STACK\r\n        this.transactions = [];\r\n\r\n        // THE TOTAL NUMBER OF TRANSACTIONS ON THE STACK,\r\n        // INCLUDING THOSE THAT MAY HAVE ALREADY BEEN UNDONE\r\n        this.numTransactions = 0;\r\n\r\n        // THE INDEX OF THE MOST RECENT TRANSACTION, NOTE THAT\r\n        // THIS MAY BE IN THE MIDDLE OF THE TRANSACTION STACK\r\n        // IF SOME TRANSACTIONS ON THE STACK HAVE BEEN UNDONE\r\n        // AND STILL COULD BE REDONE.\r\n        this.mostRecentTransaction = -1;\r\n\r\n        // THESE STATE VARIABLES ARE TURNED ON AND OFF WHILE\r\n        // TRANSACTIONS ARE DOING THEIR WORK SO AS TO HELP\r\n        // MANAGE CONCURRENT UPDATES\r\n        this.performingDo = false;\r\n        this.performingUndo = false;\r\n    }\r\n\r\n    /**\r\n     * isPerformingDo\r\n     * \r\n     * Accessor method for getting a boolean representing whether or not\r\n     * a transaction is currently in the midst of a do/redo operation.\r\n     */\r\n    isPerformingDo() {\r\n        return this.performingDo;\r\n    }\r\n\r\n    /**\r\n     * isPerformingUndo\r\n     * \r\n     * Accessor method for getting a boolean representing whether or not\r\n     * a transaction is currently in the midst of an undo operation.\r\n     */\r\n    isPerformingUndo() {\r\n        return this.performingUndo;\r\n    }\r\n\r\n    /**\r\n     * getSize\r\n     * \r\n     * Accessor method for getting the number of transactions on the stack.\r\n     */\r\n    getSize() {\r\n        return this.transactions.length;\r\n    }\r\n\r\n    /**\r\n     * getRedoSize\r\n     * \r\n     * Method for getting the total number of transactions on the stack\r\n     * that can possibly be redone.\r\n     */\r\n    getRedoSize() {\r\n        return this.getSize() - this.mostRecentTransaction - 1;\r\n    }\r\n\r\n    /**\r\n     * getUndoSize\r\n     * \r\n     * Method for getting the total number of transactions on the stack\r\n     * that can possible be undone.\r\n     */\r\n    getUndoSize() {\r\n        return this.mostRecentTransaction + 1;\r\n    }\r\n\r\n    /**\r\n     * hasTransactionToRedo\r\n     * \r\n     * Method for getting a boolean representing whether or not\r\n     * there are transactions on the stack that can be redone.\r\n     */\r\n    hasTransactionToRedo() {\r\n        return (this.mostRecentTransaction+1) < this.numTransactions;\r\n    }\r\n\r\n    /**\r\n     * hasTransactionToUndo\r\n     * \r\n     * Method for getting a boolean representing whehter or not\r\n     * there are transactions on the stack that can be undone.\r\n     */\r\n    hasTransactionToUndo() {\r\n        return this.mostRecentTransaction >= 0;\r\n    }\r\n\r\n    /**\r\n     * addTransaction\r\n     * \r\n     * Method for adding a transaction to the TPS stack, note it\r\n     * also then does the transaction.\r\n     * \r\n     * @param {jsTPS_Transaction} transaction Transaction to add to the stack and do.\r\n     */\r\n    addTransaction(transaction) {\r\n        // ARE WE BRANCHING?\r\n        if ((this.mostRecentTransaction < 0) \r\n            || (this.mostRecentTransaction < (this.transactions.length - 1))) {\r\n                for (let i = this.transactions.length - 1; i > this.mostRecentTransaction; i--) {\r\n                    this.transactions.splice(i, 1);\r\n                }\r\n                this.numTransactions = this.mostRecentTransaction + 2;\r\n        }\r\n        else {\r\n            this.numTransactions++;\r\n        }\r\n\r\n        // ADD THE TRANSACTION\r\n        this.transactions[this.mostRecentTransaction+1] = transaction;\r\n\r\n        // AND EXECUTE IT\r\n        this.doTransaction();\r\n    }\r\n\r\n    /**\r\n     * doTransaction\r\n     * \r\n     * Does the current transaction on the stack and advances the transaction\r\n     * counter. Note this function may be invoked as a result of either adding\r\n     * a transaction (which also does it), or redoing a transaction.\r\n     */\r\n    doTransaction() {\r\n        if (this.hasTransactionToRedo()) {\r\n            this.performingDo = true;\r\n            let transaction = this.transactions[this.mostRecentTransaction+1];\r\n            transaction.doTransaction();\r\n            this.mostRecentTransaction++;\r\n            this.performingDo = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This function gets the most recently executed transaction on the \r\n     * TPS stack and undoes it, moving the TPS counter accordingly.\r\n     */\r\n    undoTransaction() {\r\n        if (this.hasTransactionToUndo()) {\r\n            this.performingUndo = true;\r\n            let transaction = this.transactions[this.mostRecentTransaction];\r\n            transaction.undoTransaction();\r\n            this.mostRecentTransaction--;\r\n            this.performingUndo = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * clearAllTransactions\r\n     * \r\n     * Removes all the transactions from the TPS, leaving it with none.\r\n     */\r\n    clearAllTransactions() {\r\n        // REMOVE ALL THE TRANSACTIONS\r\n        this.transactions = [];\r\n        \r\n        // MAKE SURE TO RESET THE LOCATION OF THE\r\n        // TOP OF THE TPS STACK TOO\r\n        this.mostRecentTransaction = -1;      \r\n        this.numTransactions = 0; \r\n    }\r\n\r\n    /**\r\n     * toString\r\n     * \r\n     * Builds and returns a textual represention of the full TPS and its stack.\r\n     */\r\n    toString() {        \r\n        let text = \"--Number of Transactions: \" + this.numTransactions + \"\\n\";\r\n        text += \"--Current Index on Stack: \" + this.mostRecentTransaction + \"\\n\";\r\n        text += \"--Current Transaction Stack:\\n\";\r\n        for (let i = 0; i <= this.mostRecentTransaction; i++) {\r\n            let jT = this.transactions[i];\r\n            text += \"----\" + jT.toString() + \"\\n\";\r\n        }\r\n        return text;        \r\n    }\r\n}"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,iBAAiB,CAAC;EAC3B;AACJ;AACA;EACIC,aAAa,GAAG;IACZC,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;EACzD;;EAEA;AACJ;AACA;EACIC,eAAe,GAAG;IACdF,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC;EAC3D;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAME,KAAK,CAAC;EACvBC,WAAW,GAAG;IACV;IACA,IAAI,CAACC,YAAY,GAAG,EAAE;;IAEtB;IACA;IACA,IAAI,CAACC,eAAe,GAAG,CAAC;;IAExB;IACA;IACA;IACA;IACA,IAAI,CAACC,qBAAqB,GAAG,CAAC,CAAC;;IAE/B;IACA;IACA;IACA,IAAI,CAACC,YAAY,GAAG,KAAK;IACzB,IAAI,CAACC,cAAc,GAAG,KAAK;EAC/B;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACIC,cAAc,GAAG;IACb,OAAO,IAAI,CAACF,YAAY;EAC5B;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACIG,gBAAgB,GAAG;IACf,OAAO,IAAI,CAACF,cAAc;EAC9B;;EAEA;AACJ;AACA;AACA;AACA;EACIG,OAAO,GAAG;IACN,OAAO,IAAI,CAACP,YAAY,CAACQ,MAAM;EACnC;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACIC,WAAW,GAAG;IACV,OAAO,IAAI,CAACF,OAAO,EAAE,GAAG,IAAI,CAACL,qBAAqB,GAAG,CAAC;EAC1D;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACIQ,WAAW,GAAG;IACV,OAAO,IAAI,CAACR,qBAAqB,GAAG,CAAC;EACzC;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACIS,oBAAoB,GAAG;IACnB,OAAQ,IAAI,CAACT,qBAAqB,GAAC,CAAC,GAAI,IAAI,CAACD,eAAe;EAChE;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACIW,oBAAoB,GAAG;IACnB,OAAO,IAAI,CAACV,qBAAqB,IAAI,CAAC;EAC1C;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIW,cAAc,CAACC,WAAW,EAAE;IACxB;IACA,IAAK,IAAI,CAACZ,qBAAqB,GAAG,CAAC,IAC3B,IAAI,CAACA,qBAAqB,GAAI,IAAI,CAACF,YAAY,CAACQ,MAAM,GAAG,CAAG,EAAE;MAC9D,KAAK,IAAIO,CAAC,GAAG,IAAI,CAACf,YAAY,CAACQ,MAAM,GAAG,CAAC,EAAEO,CAAC,GAAG,IAAI,CAACb,qBAAqB,EAAEa,CAAC,EAAE,EAAE;QAC5E,IAAI,CAACf,YAAY,CAACgB,MAAM,CAACD,CAAC,EAAE,CAAC,CAAC;MAClC;MACA,IAAI,CAACd,eAAe,GAAG,IAAI,CAACC,qBAAqB,GAAG,CAAC;IAC7D,CAAC,MACI;MACD,IAAI,CAACD,eAAe,EAAE;IAC1B;;IAEA;IACA,IAAI,CAACD,YAAY,CAAC,IAAI,CAACE,qBAAqB,GAAC,CAAC,CAAC,GAAGY,WAAW;;IAE7D;IACA,IAAI,CAACpB,aAAa,EAAE;EACxB;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EACIA,aAAa,GAAG;IACZ,IAAI,IAAI,CAACiB,oBAAoB,EAAE,EAAE;MAC7B,IAAI,CAACR,YAAY,GAAG,IAAI;MACxB,IAAIW,WAAW,GAAG,IAAI,CAACd,YAAY,CAAC,IAAI,CAACE,qBAAqB,GAAC,CAAC,CAAC;MACjEY,WAAW,CAACpB,aAAa,EAAE;MAC3B,IAAI,CAACQ,qBAAqB,EAAE;MAC5B,IAAI,CAACC,YAAY,GAAG,KAAK;IAC7B;EACJ;;EAEA;AACJ;AACA;AACA;EACIN,eAAe,GAAG;IACd,IAAI,IAAI,CAACe,oBAAoB,EAAE,EAAE;MAC7B,IAAI,CAACR,cAAc,GAAG,IAAI;MAC1B,IAAIU,WAAW,GAAG,IAAI,CAACd,YAAY,CAAC,IAAI,CAACE,qBAAqB,CAAC;MAC/DY,WAAW,CAACjB,eAAe,EAAE;MAC7B,IAAI,CAACK,qBAAqB,EAAE;MAC5B,IAAI,CAACE,cAAc,GAAG,KAAK;IAC/B;EACJ;;EAEA;AACJ;AACA;AACA;AACA;EACIa,oBAAoB,GAAG;IACnB;IACA,IAAI,CAACjB,YAAY,GAAG,EAAE;;IAEtB;IACA;IACA,IAAI,CAACE,qBAAqB,GAAG,CAAC,CAAC;IAC/B,IAAI,CAACD,eAAe,GAAG,CAAC;EAC5B;;EAEA;AACJ;AACA;AACA;AACA;EACIiB,QAAQ,GAAG;IACP,IAAIC,IAAI,GAAG,4BAA4B,GAAG,IAAI,CAAClB,eAAe,GAAG,IAAI;IACrEkB,IAAI,IAAI,4BAA4B,GAAG,IAAI,CAACjB,qBAAqB,GAAG,IAAI;IACxEiB,IAAI,IAAI,gCAAgC;IACxC,KAAK,IAAIJ,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI,IAAI,CAACb,qBAAqB,EAAEa,CAAC,EAAE,EAAE;MAClD,IAAIK,EAAE,GAAG,IAAI,CAACpB,YAAY,CAACe,CAAC,CAAC;MAC7BI,IAAI,IAAI,MAAM,GAAGC,EAAE,CAACF,QAAQ,EAAE,GAAG,IAAI;IACzC;IACA,OAAOC,IAAI;EACf;AACJ"},"metadata":{},"sourceType":"module"}